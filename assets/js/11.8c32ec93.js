(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{369:function(t,s,a){"use strict";a.r(s);var e=a(42),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"vue源码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue源码"}},[t._v("#")]),t._v(" vue源码")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://vue-js.com/learn-vue/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://vue-js.com/learn-vue/"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("vue：\n数据驱动视图---\x3e数据变化引起视图变化\n"),a("font",{attrs:{color:"red"}},[t._v("UI = render(state)")]),t._v("\n状态state是输入，页面UI输出,状态输入变化页面输出也随之变化==>就是数据驱动视图")],1),t._v(" "),a("p",[t._v("Object 的变化和侦测：\n通过")]),t._v(" "),a("h3",{attrs:{id:"虚拟dom"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#虚拟dom"}},[t._v("#")]),t._v(" 虚拟DOM")]),t._v(" "),a("p",[t._v("简单来说就是用JS对象来描述一个DOM节点（用JS模拟一个DOM节点，称为"),a("code",[t._v("虚拟DOM")]),t._v("节点，数据发生变化，对比变化前后的虚拟DOM节点，通过DOM-Diff算法计算需更新的地方再更新视图）")]),t._v(" "),a("p",[t._v("这个JS对象就是真实DOM节点的虚拟DOM节点")]),t._v(" "),a("p",[t._v("操作真实DOM耗性能 所以需要虚拟DOM")]),t._v(" "),a("p",[t._v("vue中存在"),a("code",[t._v("VNode类")]),t._v("，通过这个类实例化出不同类型的虚拟DOM节点，类中包含真实DOM的一系列属性（tag表示节点的标签名、text表示节点中包含的文本、注释节点）")]),t._v(" "),a("p",[t._v("创建、更新、删除\nDOM-Diff算法：新前与旧前节点、新后与旧后节点、新后与旧前节点、新前与旧后节点")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"b"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("我是内容"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    tag"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 元素标签")]),t._v("\n    attrs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 属性")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'b'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'我是内容'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 文本内容")]),t._v("\n    children"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 子元素")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"vue模板编译"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue模板编译"}},[t._v("#")]),t._v(" vue模板编译")]),t._v(" "),a("p",[a("code",[t._v("render")]),t._v("函数：把用户在"),a("code",[t._v("<template></template>")]),t._v("标签中写的类似于原生"),a("code",[t._v("HTML")]),t._v("的内容进行编译，把原生"),a("code",[t._v("HTML")]),t._v("的内容找出来，再把非原生"),a("code",[t._v("HTML")]),t._v("找出来，经过一系列的逻辑处理生成渲染函数；")]),t._v(" "),a("p",[a("code",[t._v("render")]),t._v("函数会将模板内容生成对应的"),a("code",[t._v("VNode")])]),t._v(" "),a("p",[t._v("最终目的是用模板生成"),a("code",[t._v("render")]),t._v("函数，用"),a("code",[t._v("render")]),t._v("函数生成与模板对应的"),a("code",[t._v("VNode")]),t._v("，再进行"),a("code",[t._v("patch")]),t._v("算法，完成视图渲染；")]),t._v(" "),a("p",[t._v("三大主线：模板解析阶段、优化阶段、代码生成阶段")]),t._v(" "),a("h3",{attrs:{id:"模板解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模板解析"}},[t._v("#")]),t._v(" 模板解析")]),t._v(" "),a("p",[t._v("把用户在"),a("code",[t._v("<template></template")]),t._v("标签内写的模板使用正则等方式解析成抽象语法树"),a("code",[t._v("AST")]),t._v("，标签内有HTML解析、文本解析器、过滤器解析器；主线函数"),a("code",[t._v("parser")]),t._v("将HTML模板字符串转化成AST")]),t._v(" "),a("p",[t._v("把用户写的模板字符串经过解析阶段解析生成对应的抽象语法树")]),t._v(" "),a("p",[t._v("经过优化阶段将AST中的静态节点及静态根节点打上标记\n最后生成render函数字符串")])])}),[],!1,null,null,null);s.default=r.exports}}]);